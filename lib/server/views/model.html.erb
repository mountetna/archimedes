<!DOCTYPE html>
<meta charset='utf-8'/>
<html>
  <head>
    <title>
      <%= Timur.instance.environment == :development ? 'Dev Timur' : 'Timur' %> 
      - Browse - 
      <%= @params[:record_name] %>
    </title>
    <link rel='stylesheet' media='screen' href='/css/timur.bundle.css'/>
    <script src='/js/routes.js'></script>
    <script src='/js/timur.bundle.js'></script>
  </head>
  <body>
    <div id='root'></div>
    <script type='text/javascript'>
      var TIMUR_CONFIG = <%= config_json %>;
      const timur = new TimurApp(
        {
          user: <%= @user ? "'#{@user.first} #{@user.last}'" : 'null'%>,
          mode: 'browse',
          environment: '<%= Timur.instance.environment %>',
          model_name: '<%= @params[:model_name] %>',
          record_name: '<%= @params[:record_name] %>',
          can_edit: <%=  @user && @user.can_edit?(@params[:project_name]) ? :true : :false  %>,
          is_admin: <%=  @user && @user.is_admin?(@params[:project_name]) ? :true : :false  %>
        },
        'root'
      );
    </script>
  </body>
</html>
